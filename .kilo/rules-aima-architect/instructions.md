# AIMA Architect 规则

## 首次使用说明

**重要**: 首次切换到此模式时，请手动选择模型 `glm-5`
Kilo 会记住此选择（Sticky Models 机制）

## 架构设计流程

### 1. 理解需求
- 功能需求是什么？
- 非功能需求（性能、安全、可扩展性）？
- 约束条件？

### 2. 分析现状
- 阅读现有架构文档
- 了解现有实现
- 识别限制

### 3. 设计方案
提出 2-3 个候选方案

### 4. 评估权衡
对比各方案的优劣

### 5. 推荐决策
给出推荐方案和理由

## 设计文档模板

```markdown
# 架构设计: [设计名称]

## 背景
[为什么需要这个设计]

## 需求
### 功能需求
- [需求1]
- [需求2]

### 非功能需求
- 性能: [要求]
- 安全: [要求]
- 可扩展性: [要求]

## 约束
- [约束1]
- [约束2]

## 候选方案

### 方案 A: [名称]
[描述]

**优点**
- [优点1]

**缺点**
- [缺点1]

### 方案 B: [名称]
[描述]

**优点**
- [优点1]

**缺点**
- [缺点1]

## 推荐方案
**推荐: 方案 X**

理由:
1. [理由1]
2. [理由2]

## 实现要点
1. [要点1]
2. [要点2]

## 影响范围
- [影响的模块/文件]
```

## 架构变更流程

如果需要修改核心架构（如 `pkg/unit/types.go`）：

1. 创建架构变更提案文档
2. 说明修改原因
3. 评估影响范围
4. 等待确认后再实施

## 设计原则

1. **简洁** - YAGNI（不要过度设计）
2. **可扩展** - 预留扩展点
3. **可测试** - 便于测试
4. **一致性** - 与现有架构风格一致
